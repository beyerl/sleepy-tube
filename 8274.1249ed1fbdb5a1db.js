"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8274],{8274:(He,x,a)=>{a.r(x),a.d(x,{PlayerPageModule:()=>Be});var p=a(9808),u=a(6926),G=a(4182),w=a(1873),v=a(655),y=a(5529),I=a(6498),c=a(8110),t=a(9863),X=a(9168),B=a(4115),H=a(7449);const $=["scrubberClickLayer"];function K(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",2,3),t.NdJ("click",function(s){return t.CHM(e),t.oxw().onProgressClick(s)}),t._UZ(2,"ion-progress-bar",4),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("value",e.value)("buffer",e.buffer)}}function q(n,r){1&n&&(t.TgZ(0,"div",5),t._UZ(1,"ion-progress-bar",6),t.qZA())}let ee=(()=>{class n{constructor(){this.clicked=new t.vpe}ngOnInit(){}onProgressClick(e){(0,c.k)(e.clientX)||(0,c.k)(this.scrubberClickLayer.nativeElement.clientWidth)||this.clicked.emit(e.clientX/this.scrubberClickLayer.nativeElement.clientWidth)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-scrubber"]],viewQuery:function(e,i){if(1&e&&t.Gf($,5),2&e){let s;t.iGM(s=t.CRH())&&(i.scrubberClickLayer=s.first)}},inputs:{value:"value",buffer:"buffer",disabled:"disabled"},outputs:{clicked:"clicked"},decls:3,vars:2,consts:[["class","scrubber__click-layer",3,"click",4,"ngIf","ngIfElse"],["disabledTemplate",""],[1,"scrubber__click-layer",3,"click"],["scrubberClickLayer",""],[3,"value","buffer"],[1,"scrubber__click-layer","scrubber__click-layer-disabled"],[1,"scrubber__progress-bar-disabled"]],template:function(e,i){if(1&e&&(t.YNc(0,K,3,2,"div",0),t.YNc(1,q,2,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",!i.disabled)("ngIfElse",s)}},directives:[p.O5,u.X7],styles:[".scrubber__click-layer[_ngcontent-%COMP%]{height:30px;background-color:var(--ion-color-light);display:flex;align-items:center}.scrubber__click-layer-disabled[_ngcontent-%COMP%]{background-color:var(--ion-color-white)}.scrubber__progress-bar-disabled[_ngcontent-%COMP%]{background-color:var(--ion-color-light)}"]}),n})();var te=a(2654);class ie extends te.w{constructor(r,e){super()}schedule(r,e=0){return this}}let O=(()=>{class n{constructor(e,i=n.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,s){return new this.SchedulerAction(this,e).schedule(s,i)}}return n.now=()=>Date.now(),n})();class m extends O{constructor(r,e=O.now){super(r,()=>m.delegate&&m.delegate!==this?m.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(r,e=0,i){return m.delegate&&m.delegate!==this?m.delegate.schedule(r,e,i):super.schedule(r,e,i)}flush(r){const{actions:e}=this;if(this.active)return void e.push(r);let i;this.active=!0;do{if(i=r.execute(r.state,r.delay))break}while(r=e.shift());if(this.active=!1,i){for(;r=e.shift();)r.unsubscribe();throw i}}}const R=new m(class ne extends ie{constructor(r,e){super(r,e),this.scheduler=r,this.work=e,this.pending=!1}schedule(r,e=0){if(this.closed)return this;this.state=r;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(r,e,i=0){return setInterval(r.flush.bind(r,this),i)}recycleAsyncId(r,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(r,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(r,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,e){let s,i=!1;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s}_unsubscribe(){const r=this.id,e=this.scheduler,i=e.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=r&&(this.id=this.recycleAsyncId(e,r,null)),this.delay=null}});var C=a(6688);function _(n=0,r=R){return(!function re(n){return!(0,C.k)(n)&&n-parseFloat(n)+1>=0}(n)||n<0)&&(n=0),(!r||"function"!=typeof r.schedule)&&(r=R),new I.y(e=>(e.add(r.schedule(se,n,{subscriber:e,counter:0,period:n})),e))}function se(n){const{subscriber:r,counter:e,period:i}=n;r.next(e),this.schedule({subscriber:r,counter:e+1,period:i},i)}var g=a(591),k=a(1086),oe=a(7043),P=a(4850);function N(n,r,e){return e?N(n,r).pipe((0,P.U)(i=>(0,C.k)(i)?e(...i):e(i))):new I.y(i=>{const s=(...l)=>i.next(1===l.length?l[0]:l);let o;try{o=n(s)}catch(l){return void i.error(l)}if((0,oe.m)(r))return()=>r(s,o)})}var f=a(6053),j=a(4843),ae=a(6787),U=a(2986),Q=a(1059),le=a(2868),E=a(1177);function V(n){return r=>r.lift(new ue(n))}class ue{constructor(r){this.notifier=r}call(r,e){const i=new de(r),s=(0,E.ft)(this.notifier,new E.IY(i));return s&&!i.seenValue?(i.add(s),e.subscribe(i)):i}}class de extends E.Ds{constructor(r){super(r),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var Y=a(2536),he=a(7545),pe=a(1709),ye=a(826),fe=a(448);function A(...n){return r=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),r.lift(new me(n,e))}}class me{constructor(r,e){this.observables=r,this.project=e}call(r,e){return e.subscribe(new ge(r,this.observables,this.project))}}class ge extends ye.L{constructor(r,e,i){super(r),this.observables=e,this.project=i,this.toRespond=[];const s=e.length;this.values=new Array(s);for(let o=0;o<s;o++)this.toRespond.push(o);for(let o=0;o<s;o++)this.add((0,fe.D)(this,e[o],void 0,o))}notifyNext(r,e,i){this.values[i]=e;const s=this.toRespond;if(s.length>0){const o=s.indexOf(i);-1!==o&&s.splice(o,1)}}notifyComplete(){}_next(r){if(0===this.toRespond.length){const e=[r,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(r){let e;try{e=this.project.apply(this,r)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}var be=a(2014),ve=a(5778),_e=a(5254),Se=a(3489);class Ie{constructor(r){this.predicate=r}call(r,e){return e.subscribe(new ke(r,this.predicate))}}class ke extends Se.L{constructor(r,e){super(r),this.predicate=e,this.skipping=!0,this.index=0}_next(r){const e=this.destination;this.skipping&&this.tryCallPredicate(r),this.skipping||e.next(r)}tryCallPredicate(r){try{const e=this.predicate(r,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var we=a(2198);const Ce=["youtubeContainer"];let J=(()=>{class n{constructor(e,i){this._ngZone=e,this._youtubeContainer=new y.xQ,this._destroyed=new y.xQ,this._playerChanges=new g.X(void 0),this._videoId=new g.X(void 0),this._height=new g.X(390),this._width=new g.X(640),this._startSeconds=new g.X(void 0),this._endSeconds=new g.X(void 0),this._suggestedQuality=new g.X(void 0),this._playerVars=new g.X(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=(0,p.NF)(i)}get videoId(){return this._videoId.value}set videoId(e){this._videoId.next(e)}get height(){return this._height.value}set height(e){this._height.next(e||390)}get width(){return this._width.value}set width(e){this._width.next(e||640)}set startSeconds(e){this._startSeconds.next(e)}set endSeconds(e){this._endSeconds.next(e)}set suggestedQuality(e){this._suggestedQuality.next(e)}get playerVars(){return this._playerVars.value}set playerVars(e){this._playerVars.next(e)}ngOnInit(){if(!this._isBrowser)return;let e=(0,k.of)(!0);if(!window.YT||!window.YT.Player){const s=new y.xQ;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>s.next(!0))},e=s.pipe((0,U.q)(1),(0,Q.O)(!1))}const i=function Me(n,r,e,i,s,o,l){const S=(0,f.aj)([r,o]).pipe(A((0,f.aj)([i,s])),(0,P.U)(([b,Z])=>{const[d,h]=b,[T,L]=Z;return d?{videoId:d,playerVars:h,width:T,height:L}:void 0}));return(0,f.aj)([n,S,(0,k.of)(l)]).pipe(function Ze(n){return(0,j.z)(function Pe(...n){let r=null;return"function"==typeof n[n.length-1]&&(r=n.pop()),1===n.length&&(0,C.k)(n[0])&&(n=n[0].slice()),e=>e.lift.call((0,_e.D)([e,...n]),new f.Ms(r))}(n),function Te(n){return r=>r.lift(new Ie(n))}(([r,e])=>!e),(0,P.U)(([r])=>r))}(e),(0,be.R)(Le,void 0),(0,ve.x)())}(this._youtubeContainer,this._videoId,e,this._width,this._height,this._playerVars,this._ngZone).pipe((0,le.b)(s=>{this._playerChanges.next(s)}),function Ae(n){return(0,pe.zg)(r=>r?z(r)?(0,k.of)(r):new I.y(e=>{let i=!1,s=!1;const o=l=>{s=!0,i||(l.target.removeEventListener("onReady",o),e.next(l.target))};return r.addEventListener("onReady",o),()=>{i=!0,s||n(r)}}).pipe((0,U.q)(1),(0,Q.O)(void 0)):(0,k.of)(void 0))}(s=>{z(s)||s.destroy()}),V(this._destroyed),function ce(n){return n?(0,Y.O)(()=>new y.xQ,n):(0,Y.O)(new y.xQ)}());i.subscribe(s=>{this._player=s,s&&this._pendingPlayerState&&this._initializePlayer(s,this._pendingPlayerState),this._pendingPlayerState=void 0}),function Ee(n,r,e){(0,f.aj)([n,r,e]).subscribe(([i,s,o])=>i&&i.setSize(s,o))}(i,this._width,this._height),function Ve(n,r){(0,f.aj)([n,r]).subscribe(([e,i])=>e&&i&&e.setPlaybackQuality(i))}(i,this._suggestedQuality),function xe(n,r,e,i,s,o){const l=(0,f.aj)([e,i]).pipe((0,P.U)(([d,h])=>({startSeconds:d,endSeconds:h}))),S=l.pipe(M(n,d=>!!d&&!function Oe(n){const r=n.getPlayerState();return r!==YT.PlayerState.UNSTARTED&&r!==YT.PlayerState.CUED}(d))),b=r.pipe(M(n,(d,h)=>!!d&&d.videoId!==h)),Z=n.pipe(M((0,f.aj)([r,l]),([d,h],T)=>!(!T||d==T.videoId&&!h.startSeconds&&!h.endSeconds)));(0,ae.T)(Z,b,S).pipe(A((0,f.aj)([n,r,l,s])),(0,P.U)(([d,h])=>h),V(o)).subscribe(([d,h,T,L])=>{!h||!d||(d.videoId=h,d.cueVideoById(Object.assign({videoId:h,suggestedQuality:L},T)))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(e,i){this._player?this._player.seekTo(e,i):this._getPendingState().seek={seconds:e,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(e){this._player?this._player.setVolume(e):this._getPendingState().volume=e}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(e){if(this._player)return this._player.setPlaybackRate(e);this._getPendingState().playbackRate=e}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(e,i){const{playbackState:s,playbackRate:o,volume:l,muted:S,seek:b}=i;switch(s){case YT.PlayerState.PLAYING:e.playVideo();break;case YT.PlayerState.PAUSED:e.pauseVideo();break;case YT.PlayerState.CUED:e.stopVideo()}null!=o&&e.setPlaybackRate(o),null!=l&&e.setVolume(l),null!=S&&(S?e.mute():e.unMute()),null!=b&&e.seekTo(b.seconds,b.allowSeekAhead)}_getLazyEmitter(e){return this._playerChanges.pipe((0,he.w)(i=>i?N(s=>{i.addEventListener(e,s)},s=>{try{i.removeEventListener&&i.removeEventListener(e,s)}catch(o){}}):(0,k.of)()),i=>new I.y(s=>i.subscribe({next:o=>this._ngZone.run(()=>s.next(o)),error:o=>s.error(o),complete:()=>s.complete()})),V(this._destroyed))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.R0b),t.Y36(t.Lbi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["youtube-player"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ce,5),2&e){let s;t.iGM(s=t.CRH())&&(i.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(e,i){1&e&&t._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();function Le(n,[r,e,i]){if(n&&e&&n.playerVars!==e.playerVars)n.destroy();else{if(!e)return void(n&&n.destroy());if(n)return n}const s=i.runOutsideAngular(()=>new YT.Player(r,e));return s.videoId=e.videoId,s.playerVars=e.playerVars,s}function z(n){return"getPlayerStatus"in n}function M(n,r){return(0,j.z)(A(n),(0,we.h)(([e,i])=>r(i,e)),(0,P.U)(([e])=>e))}let Re=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();const Ne=["youtubePlayer"];let W=!1,je=(()=>{class n{constructor(){this.playerWidth=window.innerWidth,this.playerHeight=100,this.eventEmitInterval=500,this.isInitialPlay=!0,this.currentTime=new t.vpe,this.remainingTime=new t.vpe,this.progress=new t.vpe,this.buffer=new t.vpe,this.duration=new t.vpe,this.volume=new t.vpe,this.ready=new t.vpe}ngOnInit(){if(!W){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.body.appendChild(e),W=!0}this.setUpInputEventSubscriptions(),this.setUpEventEmitters()}setUpInputEventSubscriptions(){this.seekEventsSubscription=this.seekEvents.subscribe(e=>this.onSeekTo(e)),this.playEventsSubscription=this.playEvents.subscribe(e=>this.onPlay()),this.pauseEventsSubscription=this.pauseEvents.subscribe(e=>this.onPause()),this.volumeEventsSubscription=this.volumeEvents.subscribe(e=>this.onVolumeChange(e))}setUpEventEmitters(){_(this.eventEmitInterval).subscribe(e=>{var i;return this.currentTime.emit((0,c.k)(this.youtubePlayer)||isNaN(null===(i=this.youtubePlayer)||void 0===i?void 0:i.getCurrentTime())?this.startSeconds:Math.round(this.youtubePlayer.getCurrentTime()))}),_(this.eventEmitInterval).subscribe(e=>{var i;return this.remainingTime.emit((0,c.k)(this.youtubePlayer)||isNaN(null===(i=this.youtubePlayer)||void 0===i?void 0:i.getDuration())?0:Math.round(this.youtubePlayer.getDuration()-this.youtubePlayer.getCurrentTime()))}),_(this.eventEmitInterval).subscribe(e=>this.progress.emit((0,c.k)(this.youtubePlayer)?0:this.youtubePlayer.getCurrentTime()/this.youtubePlayer.getDuration())),_(this.eventEmitInterval).subscribe(e=>this.buffer.emit((0,c.k)(this.youtubePlayer)?0:this.youtubePlayer.getVideoLoadedFraction())),_(this.eventEmitInterval).subscribe(e=>this.duration.emit((0,c.k)(this.youtubePlayer)?0:this.youtubePlayer.getDuration())),_(this.eventEmitInterval).subscribe(e=>this.volume.emit((0,c.k)(this.youtubePlayer)?0:this.youtubePlayer.getVolume()))}ngOnChanges(e){var i,s,o,l;!(0,c.k)(null===(i=e.videoId)||void 0===i?void 0:i.previousValue)&&!(0,c.k)(null===(s=e.videoId)||void 0===s?void 0:s.currentValue)&&(null===(o=e.videoId)||void 0===o?void 0:o.previousValue)!==(null===(l=e.videoId)||void 0===l?void 0:l.currentValue)&&(this.isInitialPlay=!0)}ngOnDestroy(){this.seekEventsSubscription.unsubscribe(),this.playEventsSubscription.unsubscribe(),this.pauseEventsSubscription.unsubscribe()}ngAfterViewInit(){this.youtubePlayer.ready.subscribe(e=>this.ready.emit(!0))}onSeekTo(e){this.youtubePlayer.seekTo(e,!0)}onPlay(){this.isInitialPlay&&(this.youtubePlayer.seekTo(this.startSeconds,!0),this.isInitialPlay=!1),this.youtubePlayer.playVideo()}onPause(){this.youtubePlayer.pauseVideo()}onVolumeChange(e){this.youtubePlayer.setVolume(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-video-player-wrapper"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ne,5),2&e){let s;t.iGM(s=t.CRH())&&(i.youtubePlayer=s.first)}},inputs:{videoId:"videoId",startSeconds:"startSeconds",seekEvents:"seekEvents",playEvents:"playEvents",pauseEvents:"pauseEvents",volumeEvents:"volumeEvents"},outputs:{currentTime:"currentTime",remainingTime:"remainingTime",progress:"progress",buffer:"buffer",duration:"duration",volume:"volume",ready:"ready"},features:[t.TTD],decls:2,vars:3,consts:[["suggestedQuality","highres",3,"videoId","width","height"],["youtubePlayer",""]],template:function(e,i){1&e&&t._UZ(0,"youtube-player",0,1),2&e&&t.Q6J("videoId",i.videoId)("width",i.playerWidth)("height",i.playerHeight)},directives:[J],styles:[""]}),n})(),Ue=(()=>{class n{transform(e){if((0,c.k)(e))return"";const i=Math.floor(e/60),s=e-60*i;return i+":"+(s>=10?s.toString():"0"+s.toString())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"minuteSeconds",type:n,pure:!0}),n})();function Qe(n,r){if(1&n&&(t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col"),t._uU(3," Countdown: "),t.qZA(),t.TgZ(4,"ion-col"),t._uU(5),t.ALo(6,"minuteSeconds"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,1,e.timeout)," ")}}function Ye(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-buttons")(2,"ion-button",8),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).onTimerStart(o)}),t._uU(3),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(3),t.hij("",e," Minutes ")}}function De(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-list"),t.YNc(2,Ye,4,1,"ion-item",3),t.qZA(),t.TgZ(3,"ion-grid")(4,"ion-row",4)(5,"ion-col")(6,"ion-item"),t._uU(7," Custom: "),t.qZA()(),t.TgZ(8,"ion-col"),t._UZ(9,"ion-input",5,6),t.qZA(),t.TgZ(11,"ion-col")(12,"ion-item"),t._uU(13,"min"),t.qZA()(),t.TgZ(14,"ion-col")(15,"ion-button",7),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(10);return t.oxw().onTimerStart(s.value)}),t._uU(16,"Start"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.timerIntervals)}}let Fe=(()=>{class n{constructor(e){this.routerOutlet=e,this.timerIntervals=[5,10,15,30,45,60],this.start=new t.vpe,this.fadeout=new t.vpe,this.elapsed=new t.vpe,this.SECONDS_PER_MINUTE=60,this.isTimerRunning=!1,this.isTimerModalOpen=!1}ngOnInit(){}onTimerModalClick(){this.isTimerModalOpen=!0}onTimerStart(e){(0,c.k)(this.timeoutIntervalId)||clearInterval(this.timeoutIntervalId),this.isTimerRunning=!0,this.start.emit(Number(e)),this.timeout=Number(e)*this.SECONDS_PER_MINUTE,this.timeoutIntervalId=setInterval(()=>{this.timeout>0?this.timeout--:(clearInterval(this.timeoutIntervalId),this.elapsed.emit(),this.isTimerRunning=!1),this.timeout<=30&&this.fadeout.emit()},1e3),this.onModalDismiss()}onModalDismiss(){this.isTimerModalOpen=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.jP))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-timer"]],inputs:{timerIntervals:"timerIntervals",disabled:"disabled"},outputs:{start:"start",fadeout:"fadeout",elapsed:"elapsed"},decls:5,vars:5,consts:[["color","primary","expand","block","shape","round",3,"disabled","click"],[4,"ngIf"],[3,"isOpen","swipeToClose","presentingElement","didDismiss"],[4,"ngFor","ngForOf"],["id","player-row",1,"ion-justify-content-between"],["type","number","value","10","min","1","max","60"],["timeoutInput",""],[3,"click"],["color","dark","expand","fullwidth",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-button",0),t.NdJ("click",function(){return i.onTimerModalClick()}),t._uU(1," Timer\n"),t.qZA(),t.YNc(2,Qe,7,3,"ion-grid",1),t.TgZ(3,"ion-modal",2),t.NdJ("didDismiss",function(){return i.onModalDismiss()}),t.YNc(4,De,17,1,"ng-template"),t.qZA()),2&e&&(t.Q6J("disabled",i.disabled),t.xp6(2),t.Q6J("ngIf",i.isTimerRunning),t.xp6(1),t.Q6J("isOpen",i.isTimerModalOpen)("swipeToClose",!0)("presentingElement",i.routerOutlet.nativeEl))},directives:[u.YG,p.O5,u.jY,u.Nd,u.wI,u.ki,u.W2,u.q_,p.sg,u.Ie,u.Sm,u.pK,u.as],pipes:[Ue],styles:[""]}),n})(),Je=(()=>{class n{transform(e){if((0,c.k)(e))return"";const i=Math.floor(e/3600),s=Math.floor((e-3600*i)/60),o=e-3600*i-60*s;return`${this.prependLeadingZero(i)}:${this.prependLeadingZero(s)}:${this.prependLeadingZero(o)}`}prependLeadingZero(e){return e>=10?e.toString():"0"+e.toString()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"hourMinuteSeconds",type:n,pure:!0}),n})();function ze(n,r){1&n&&t._UZ(0,"ion-icon",18)}function We(n,r){1&n&&t._UZ(0,"ion-icon",19)}const Ge=[{path:"",component:(()=>{class n{constructor(e,i,s,o){this.keyValueStoreService=e,this.playerService=i,this.route=s,this.searchService=o,this.SKIP_TIME_IN_SECONDS=30,this.TITLE_MAX_LENGTH=100,this.isVideoLoaded=!1,this.reinitializeVolume=!1,this.isVideoPlayerReady=!1,this.currentTime=0,this.remainingTime=0,this.progress=0,this.buffer=0,this.duration=0,this.volume=100,this.isPlaying=!1,this.seekSubject=new y.xQ,this.playSubject=new y.xQ,this.pauseSubject=new y.xQ,this.volumeSubject=new y.xQ,this.ready$=new I.y(l=>this.readySubscriber=l)}ngOnInit(){return(0,v.mG)(this,void 0,void 0,function*(){this.route.queryParams.subscribe(e=>(0,v.mG)(this,void 0,void 0,function*(){if(!(0,c.k)(e.v)&&this.playerService.currentVideo.getValue().id!==e.v){const s=yield this.searchService.getVideoInfo(e.v);this.playerService.setCurrentVideo(s)}}))})}ngAfterViewInit(){this.playerServiceSubscription=this.playerService.getCurrentVideoAsObserveable().subscribe(e=>this.onCurrentVideoChange(e))}ngOnDestroy(){this.videoPlayerReadySubscription.unsubscribe()}onCurrentVideoChange(e){return(0,v.mG)(this,void 0,void 0,function*(){console.log("\u{1f680} ~ file: player.page.ts:80 ~ PlayerPage ~ onCurrentVideoChange ~ video",e),this.isVideoLoaded=!1,this.currentTime=0;const i=this.keyValueStoreService.get(e.id);this.startSeconds=i||0,this.video=e,this.videoPlayerReadySubscription=this.ready$.subscribe(()=>(0,v.mG)(this,void 0,void 0,function*(){this.isVideoLoaded=!0,this.isVideoPlayerReady=!0})),this.isVideoPlayerReady&&(this.isVideoLoaded=!0)})}onScrubberClick(e){this.seekSubject.next(this.duration*e),this.isPlaying||this.onPlay()}onPlayOrPause(){return(0,v.mG)(this,void 0,void 0,function*(){this.isPlaying?this.onPause():yield this.onPlay()})}onPlay(){return(0,v.mG)(this,void 0,void 0,function*(){(0,c.k)(this.videoPlayerIntervalId)||clearInterval(this.videoPlayerIntervalId),this.playSubject.next(),this.reinitializeVolume?this.volumeSubject.next(this.initialVolume):this.initialVolume=this.volume,this.videoPlayerIntervalId=setInterval(()=>{this.keyValueStoreService.set(this.video.id,this.currentTime)},1e3),this.isPlaying=!this.isPlaying})}onPause(){this.pauseSubject.next(),this.keyValueStoreService.set(this.video.id,this.currentTime),(0,c.k)(this.videoPlayerIntervalId)||clearInterval(this.videoPlayerIntervalId),this.isPlaying=!this.isPlaying}onSkipForward(){this.seekSubject.next(Math.round(Number(this.keyValueStoreService.get(this.video.id)))+this.SKIP_TIME_IN_SECONDS)}onSkipBackward(){this.seekSubject.next(Math.round(Number(this.keyValueStoreService.get(this.video.id)))-this.SKIP_TIME_IN_SECONDS)}onTimerStart(){this.isPlaying||this.onPlay()}onTimerFadeOut(){this.volumeSubject.next(this.volume-this.initialVolume/30)}onTimerElapsed(){this.onPause(),this.keyValueStoreService.set(this.video.id,Math.round(this.keyValueStoreService.get(this.video.id)-15)),this.reinitializeVolume=!0}onVideoPlayerReady(e){this.readySubscriber.next(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(X.Z),t.Y36(B.l),t.Y36(w.gz),t.Y36(H.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-player"]],decls:39,vars:31,consts:[[3,"fullscreen"],[3,"src"],[1,"ion-justify-content-between"],[1,"font-size-sm"],[1,"font-size-sm","ion-text-end"],[3,"value","buffer","disabled","clicked"],["id","player-row",1,"ion-justify-content-center",3,"hidden"],[3,"videoId","startSeconds","seekEvents","playEvents","pauseEvents","volumeEvents","currentTime","remainingTime","progress","buffer","duration","volume","ready"],["videoPlayerWrapper",""],["id","player-row",1,"ion-justify-content-between","ion-align-items-center"],["color","primary","expand","block","shape","round",3,"disabled","click"],["name","chevron-back-outline"],["color","primary","expand","block","shape","round","size","large",3,"disabled","click"],["name","play-outline",4,"ngIf"],["name","pause-outline",4,"ngIf"],["name","chevron-forward-outline"],[3,"disabled","start","elapsed","fadeout"],["timer",""],["name","play-outline"],["name","pause-outline"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col"),t._UZ(4,"ion-img",1),t.qZA()(),t.TgZ(5,"ion-row",2)(6,"ion-col"),t._uU(7),t.ALo(8,"slice"),t.qZA()(),t.TgZ(9,"ion-row",2)(10,"ion-col",3),t._uU(11),t.ALo(12,"hourMinuteSeconds"),t.qZA(),t.TgZ(13,"ion-col",4),t._uU(14),t.ALo(15,"hourMinuteSeconds"),t.qZA()(),t.TgZ(16,"ion-row")(17,"ion-col")(18,"app-scrubber",5),t.NdJ("clicked",function(o){return i.onScrubberClick(o)}),t.qZA()()(),t.TgZ(19,"ion-row",6)(20,"app-video-player-wrapper",7,8),t.NdJ("currentTime",function(o){return i.currentTime=o})("remainingTime",function(o){return i.remainingTime=o})("progress",function(o){return i.progress=o})("buffer",function(o){return i.buffer=o})("duration",function(o){return i.duration=o})("volume",function(o){return i.volume=o})("ready",function(o){return i.onVideoPlayerReady(o)}),t.qZA()(),t.TgZ(22,"ion-row",9)(23,"ion-col")(24,"ion-button",10),t.NdJ("click",function(){return i.onSkipBackward()}),t._UZ(25,"ion-icon",11),t._uU(26),t.qZA()(),t.TgZ(27,"ion-col")(28,"ion-button",12),t.NdJ("click",function(){return i.onPlayOrPause()}),t.YNc(29,ze,1,0,"ion-icon",13),t.YNc(30,We,1,0,"ion-icon",14),t.qZA()(),t.TgZ(31,"ion-col")(32,"ion-button",10),t.NdJ("click",function(){return i.onSkipForward()}),t._uU(33),t._UZ(34,"ion-icon",15),t.qZA()()(),t.TgZ(35,"ion-row")(36,"ion-col")(37,"app-timer",16,17),t.NdJ("start",function(){return i.onTimerStart()})("elapsed",function(){return i.onTimerElapsed()})("fadeout",function(){return i.onTimerFadeOut()}),t.qZA()()()()()),2&e&&(t.Q6J("fullscreen",!0),t.xp6(4),t.Q6J("src",null==i.video?null:i.video.imageSrc),t.xp6(3),t.hij(" ",(null==i.video||null==i.video.title?null:i.video.title.length)>i.TITLE_MAX_LENGTH?t.Dn7(8,23,null==i.video?null:i.video.title,0,i.TITLE_MAX_LENGTH)+"...":null==i.video?null:i.video.title," "),t.xp6(4),t.hij(" elapsed: ",t.lcZ(12,27,i.currentTime)," "),t.xp6(3),t.hij(" remaining: ",t.lcZ(15,29,i.remainingTime)," "),t.xp6(4),t.Q6J("value",i.progress)("buffer",i.buffer)("disabled",!i.isVideoLoaded),t.xp6(1),t.Q6J("hidden",!0),t.xp6(1),t.Q6J("videoId",null==i.video?null:i.video.id)("startSeconds",i.startSeconds)("seekEvents",i.seekSubject.asObservable())("playEvents",i.playSubject.asObservable())("pauseEvents",i.pauseSubject.asObservable())("volumeEvents",i.volumeSubject.asObservable()),t.xp6(4),t.Q6J("disabled",!i.isPlaying),t.xp6(2),t.hij(" ",i.SKIP_TIME_IN_SECONDS,"s "),t.xp6(2),t.Q6J("disabled",!i.isVideoLoaded),t.xp6(1),t.Q6J("ngIf",!i.isPlaying),t.xp6(1),t.Q6J("ngIf",i.isPlaying),t.xp6(2),t.Q6J("disabled",!i.isPlaying),t.xp6(1),t.hij(" ",i.SKIP_TIME_IN_SECONDS,"s "),t.xp6(4),t.Q6J("disabled",!i.isVideoLoaded))},directives:[u.W2,u.jY,u.Nd,u.wI,u.Xz,ee,je,u.YG,u.gu,p.O5,Fe],pipes:[p.OU,Je],styles:[".font-size-sm[_ngcontent-%COMP%]{font-size:.8rem}"]}),n})()}];let Xe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:p.S$,useClass:p.Do}],imports:[[w.Bz.forChild(Ge)],w.Bz]}),n})(),Be=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,G.u5,u.Pc,Xe,Re]]}),n})()}}]);